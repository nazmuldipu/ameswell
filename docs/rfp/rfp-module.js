var _=Object.defineProperty;var l=(e,t,s)=>(typeof t!="symbol"&&(t+=""),t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s);var S="https://hotel-site.skipperhospitality.com/contact/ameswell",a="text-ams-primary",c="text-ams-green",i="text-rose-600",f="Success! You'll hear from our team shortly",E="Contacting our servers...",d="Something went wrong. Please try again",p="Please fill in the required fields";"use strict";var L=e=>e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement?e.type==="checkbox"||e.type==="radio"?e.checked:e.value!=="":!1,C=e=>Array.from(e.elements).every(t=>t.required&&t.value||!t.required),R=e=>{let t=e.elements;return Array.from(t).reduce((s,o)=>(L(o)&&(s[o.name]?Array.isArray(s[o.name])?s[o.name].push(o.value):s[o.name]=[s[o.name],o.value]:s[o.name]=o.value),s),{})};async function A(e,t){let s=R(e);return await fetch(`${S}?request_type=${t}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer this-is-my-secret-token-ameswell"},body:JSON.stringify(s)})}"use strict";var T=e=>`The following fields have invalid values: ${Object.keys(e).join(", ")}`,u=class extends HTMLElement{constructor(){super();var t,s,o;this.submitButton=(t=this.getElementsByClassName("submit__button"))==null?void 0:t[0],this.ajaxStatusEl=(s=this.getElementsByClassName("ajax__status"))==null?void 0:s[0],this.setStatusColor(a),this.form=(o=this.getElementsByTagName("form"))==null?void 0:o[0],this.formDisabled=!1,this.formInteractionHandler=m=>{this.clearFormInteractionListeners(),this.hideStatus()},this.submitButton instanceof HTMLAnchorElement&&(this.submitButton.onclick=this.form.submit,this.href=this.submitButton.href),this.form.onsubmit=m=>{m.preventDefault(),C(this.form)?(this.showStatus(),this.setStatusCopy(E),this.setStatusColor(a),this.formDisabled=!0,A(this.form,this.dataset.type).then(r=>{if(r.ok)r.json().then(h=>{this.setStatusCopy(f),this.setStatusColor(c),this.clearForm()});else if(r.body instanceof ReadableStream)r.json().then(({errors:h})=>{this.setStatusColor(i),this.setStatusCopy(T(h))});else throw new Error(`SERVER ERROR ${r.status} -- ${r.statusText}`)}).catch(r=>{this.setStatusCopy(d),this.setStatusColor(i)}).finally(()=>{this.applyFormInteractionListeners(),this.formDisabled=!1})):(this.setStatusCopy(p),this.setStatusColor(i),this.applyFormInteractionListeners())}}applyFormInteractionListeners(){u.formInteractionEvents.forEach(t=>{this.form.addEventListener(t,this.formInteractionHandler,{once:!0})})}clearFormInteractionListeners(){u.formInteractionEvents.forEach(t=>{this.form.removeEventListener(t,this.formInteractionHandler,{once:!0})})}clearForm(){this.form.reset()}set formDisabled(t){switch(!0){case this.submitButton instanceof HTMLButtonElement:this.submitButton.disabled=t;break;case this.submitButton instanceof HTMLAnchorElement:t?(this.submitButton.href="javascript:void(0)",this.submitButton.onclick=!1):(this.submitButton.href=this.href,this.submitButton.onclick=this.form.submit());break;default:break}}setStatusCopy(t){this.ajaxStatusEl.textContent=t}hideStatus(){this.ajaxStatusEl.classList.add("hidden")}showStatus(){this.ajaxStatusEl.classList.remove("hidden")}setStatusColor(t){this.ajaxStatusEl.classList.remove(a,c,i),this.ajaxStatusEl.classList.add(t)}},n=u;l(n,"formInteractionEvents",["click","keydown"]);var M=n;customElements.define("form-sender",n);"use strict";
